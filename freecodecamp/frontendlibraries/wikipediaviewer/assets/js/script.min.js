function creaElementoWiki(i,t){"use strict";console.log("Creo elemento wiki: "+t);var e="",a="",r="",s="",n="",o="";i[t].hasOwnProperty("index")&&(e=i[t].index),i[t].hasOwnProperty("pageid")&&(a=i[t].pageid,s="https://it.wikipedia.org/?curid="+i[t].pageid),i[t].hasOwnProperty("title")&&(r=i[t].title),i[t].hasOwnProperty("terms")&&(n=i[t].terms.description[0]),i[t].hasOwnProperty("thumbnail")&&(o=i[t].thumbnail.source);var c=new WikiItem(e,a,r,s,n,o);return c}function creaWiki(i){"use strict";var t=[];return $.each(i,function(e,a){t.push(creaElementoWiki(i,e))}),t}function creaDivRisultato(i,t){"use strict";var e=i[t].immagine,a=i[t].titolo,r=i[t].descrizione,s=i[t].url,n="";n='<div class="risultato" onClick="apriWikipedia(this);" vai="'+s+'">',n+='<div class="card-image"><img class="img-thumbnail img-responsive immagine-piccola" src="'+e+'"/></div>',n+='<div class="card-testi">',n+='<div class="card-titolo"><p>'+a+"</p></div>",n+='<div class="card-riassunto"><p>'+r+"</p></div>",n+="</div></div>",$("#risultati").append(n)}function mostraRisultati(i){"use strict";$.each(i,function(t,e){creaDivRisultato(i,t)})}function creoOggettoDaJson(i){"use strict";var t=JSON.stringify(i),e=JSON.parse(t);e=e.query.pages,e=e.sort(function(i,t){return i.index-t.index}),wiki=creaWiki(e),console.log(wiki),console.log("Wiki creata"),mostraRisultati(wiki)}function estraiJson(i){"use strict";console.log("Estraggo Json per "+i),$.ajax({type:"GET",url:i+"&callback=?",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",success:function(i,t,e){creoOggettoDaJson(i)}})}function cercaParolaInserita(){"use strict";$("#risultati").html("");var i=$("#cerca").val(),t="https://it.wikipedia.org/w/api.php?action=query&format=json&prop=pageimages%7Cpageterms&generator=prefixsearch&redirects=1&formatversion=2&piprop=thumbnail&pithumbsize=250&pilimit=20&wbptterms=description&gpssearch="+i+"&gpslimit=10";estraiJson(t)}function apriWikipedia(i){"use strict";var t=i.getAttribute("vai");window.open(t,"_blank")}var WikiItem=function(i,t,e,a,r,s){"use strict";this.index=i,this.id=t,this.titolo=e,this.url=a,this.descrizione=r,this.immagine=s},wiki=[];$(document).ready(function(){"use strict";$("#risultati").html("")}),$("#button-random").on("click",function(){"use strict";window.open("https://it.wikipedia.org/wiki/Special:Random","_blank")}),$("#pulsante-ricerca").on("click",function(){"use strict";cercaParolaInserita()}),$("#cerca").focusout(function(){"use strict";cercaParolaInserita()});